<div class="content-wrapper">
    <app-titulo titulo="Pessoa" />
  <!--INICIO SECTION content-->
  <section class="content" >
    <!--INICIO PROFILE -->

    <div class="row" *ngIf="pessoa$ | async as pessoa; else loading">
      <div class="col-sm-3">
        <div class="card ">
          <div class="card-body box-profile">
            
            <h3 class="profile-username text-center">{{pessoa.nome}}</h3>
            <p *ngIf="pessoa.alcunha" class="text-muted text-center">{{pessoa.alcunha}}</p>
            <ul class="list-group list-group-unbordered mb-3">
              <li class="list-group-item">
                <b>CPF</b> <a class="float-right">{{pessoa.cpf | mask: '000.000.000-00'}}</a>
              </li>
              <li *ngIf="pessoa.alcunha" class="list-group-item">
                <b>Data Nascimento</b> <a class="float-right">{{pessoa.data_nascimento | date: 'dd/MM/yyyy'}}</a>
              </li>
              <li *ngIf="pessoa.sexo_id" class="list-group-item">
                <b>Sexo</b> <a class="float-right">{{pessoa.sexo?.nome}}</a>
              </li>
              <!--<li *ngIf="pessoa.alcunha" class="list-group-item">
                <b>Alcunha</b> <a class="float-right">{{pessoa.alcunha}}</a>
              </li>-->
              <li *ngIf="pessoa.mae" class="list-group-item">
                <b>Mãe</b> <a class="float-right">{{pessoa.mae}}</a>
              </li>
              <li *ngIf="pessoa.pai" class="list-group-item">
                <b>Pai</b> <a class="float-right">{{pessoa.pai}}</a>
              </li> 
              <li *ngIf="pessoa.email" class="list-group-item">
                <b>E-mail</b> <a class="float-right">{{pessoa.email}}</a>
              </li> 
              <li *ngIf="pessoa.telefone1" class="list-group-item">
                <b>Telefone 1</b> <a class="float-right">{{pessoa.telefone1}}</a>
              </li> 
              <li *ngIf="pessoa.telefone2" class="list-group-item">
                <b>Telefone 2</b> <a class="float-right">{{pessoa.telefone2}}</a>
              </li> 
              <li *ngIf="pessoa.influencia_id" class="list-group-item">
                <b>Influência</b> <a class="float-right">{{pessoa.influencia?.nome}}</a>
              </li>  
              

            </ul>      
            <a target="_blank" class="btn btn-primary btn-block"><i class="fa fa-print" aria-hidden="true"></i> Imprimir</a>     
          </div>

          
        </div>

        <div class="card ">
            <div class="card-header border-0">Redes Sociais</div>
            <div class="card-body box-profile">
                <ul class="list-unstyled">
                    <li *ngFor="let rede of pessoa.redes_sociais"><a [href]="rede.pivot.nome" target="_blank">{{rede.nome}}</a></li>
                </ul>
            </div>
          </div>

      </div>

      <div class="col-sm-9">
        <div class="card">
          
          <div class="card-header border-0 p-2">
            <ul class="nav nav-pills">
                <!--<li class="nav-item"><a class="nav-link active" href="#informacoes" data-bs-toggle="tab">Informações</a></li>-->
                <li class="nav-item"><a class="nav-link active" href="#observacao" data-bs-toggle="tab">Observação</a></li>
                <li class="nav-item"><a class="nav-link" href="#veiculos" data-bs-toggle="tab">Veículos</a></li>
                <li class="nav-item"><a class="nav-link" href="#analises" data-bs-toggle="tab">Análises</a></li>
                <li class="nav-item"><a class="nav-link" href="#organizacoes" data-bs-toggle="tab">Organizações</a></li>
                <li class="nav-item"><a class="nav-link" href="#arquivos" data-bs-toggle="tab">Arquivos</a></li>
            </ul>
          </div>
          <div class="card-body table-responsive p-2">
              <div class="tab-content">
                <!--<div class="active tab-pane" id="informacoes">
                    <div class="row">
                        <dt class="col-sm-2">Alcunha</dt><dd class="col-sm-8">{{pessoa.alcunha}}</dd>
                    </div>
                </div>-->
                <!--INICIO TAB OBSERVACAO-->
                <div class="active tab-pane" id="observacao">
                    <div [innerHTML]="pessoa.observacao"></div>
                </div>
                <!--FIM TAB OBSERVACAO-->
                <!--INICIO TAB VEICULOS-->
                <div class="tab-pane" id="veiculos">

                  <button class="btn btn-outline-primary mb-2" data-bs-toggle="modal" data-bs-target="#modalveiculos" title="Cadastrar"><i class="fa fa-plus"></i></button>
                  <!-- INICIO MODAL VEICULOS-->
                  <div class="modal fade" id="modalveiculos" style="display: none;" aria-hidden="true">
                    <div class="modal-dialog modal-xl">
                      <div class="modal-content">
                        <div class="modal-header border-0">
                          <h4 class="modal-title">Cadastrar Veículo</h4>
                          <button type="button" class="close" #fecharmodalveiculo id="fecharmodal" data-bs-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">×</span>
                          </button>
                        </div>
                        <div class="modal-body" >
                            <formulario-pessoas-veiculos [pessoa_id]="pessoa.id" (refresh)="refresh()" />
                        </div>           
                      </div>        
                    </div>        
                  </div>
                  <!--FIM MODAL VEICULOS-->

                  <!--INICIO TABLE-->
                  <table  class="table table-hover table-head-fixed text-nowrap ">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Tipo</th> 
                        <th>Marca - Modelo</th>    
                        <th>Placa</th>    
                        <th>Chassi</th>   
                        <th>Renavam</th>   
                        <th>Pessoa / Organização</th>                      
                        <th>Opções</th>
                      </tr>
                    </thead>
                    <tbody  >
                      <tr *ngFor="let row of pessoa.veiculos" class="optionshover">
                        <td>{{row.pivot.id}}</td>
                        <td>{{row.veiculo_tipo.nome}}</td> 
                        <td>{{row.modelo?.marca?.nome}} - {{row.modelo?.nome}}</td> 
                        <td>{{row.placa}}</td> 
                        <td>{{row.chassi}}</td> 
                        <td>{{row.renavam}}</td> 
                        <td>
                          <span *ngIf="row.pessoa">{{row.pessoa.nome}}</span>
                          <span *ngIf="row.organizacao">{{row.organizacao.nome}}</span>
                        </td> 
                        <td>                                        
                            <a
                              class="options ml-2"
                              (click)="deleteVeiculo(row.pivot.id)"            
                              title="Excluir"
                            >
                              <i
                                class="fas fa-trash text-danger point "
                                aria-hidden="true"
                              ></i
                            ></a>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <!--FIM TABLE-->
                </div>
                <!--FIM TAB VEICULOS-->
                <!--INICIO TAB ANALISES-->
                <div class="tab-pane" id="analises">C</div>
                <!--FIM TAB ANALISES-->
                <!--INICIO TAB ORGANIZACOES-->
                <div class="tab-pane" id="organizacoes">D</div>
                <!--FIM TAB ORGANIZACOES-->
                <!--INICIO TAB ARQUIVOS-->
                <div class="tab-pane" id="arquivos">E</div>
                <!--FIM TAB ARQUIVOS-->
              </div>
          </div>
        </div>
      </div>

    

    

    </div>


    <ng-template  #loading>
      <div class="text-center">
        <i class="fa fa-exclamation-triangle fa-4x" aria-hidden="true"></i>
        <h2 >Pessoa não encontrado</h2>      
        <a routerLink="['/Inicio']">Voltar para o Início</a>
      </div>
      
    </ng-template>

    <!--FIM PROFILE-->
  </section>
  <!--FIM SECTION content-->
</div>
